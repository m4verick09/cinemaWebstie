<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" type="text/css" href="../css/Layout.css">
    <link rel="stylesheet" type="text/css" href="../css/Media.css">
    <script src="../js/movies.js"></script>
    <title>Zing!</title>
  </head>
  <body>
    <header>
      <div id="logo">
        <img src="../Images/2.png" alt="Logo" title="Zing Logo" />
      </div>
      <h1 id="zing-cinema">ZING CINEMA</h1>
    </header>
    <div class="Nav">
      <ul>
        <li>Home</li>
        <li><a href="NowShowing.html">Now Showing</a></li>
        <li><a href="Tickets.html">Tickets</a></li>
      </ul>
    </div>
    <main>
      <h2>Watch the trailer:</h2>
      <div id="trailer">
      </div>
      <h2 id ="now-show">Now Showing:</h2>
      <div id="now">
      </div>
      <div class="bar"></div>
      <h2 id="up-comming" >Upcoming Movies:</h2>
      <div id="up">
      </div>
    <script>
      var data = getMovies();
      var i = 0;
      while (i < data[data.length - 1].id){
        if (data[i].type == "now") {
        document.getElementById("now").innerHTML += `
        <div class="movie">
        <p class="movie-name"><b>Name:</b> ${data[i].name}</p>
        <img src="../Images/${data[i].thumbnail}" class="thumb" alt="${data[i].name}" onclick="switchVid(${data[i].id})"/>
        <dl>
          <dt><b>Cast:</b> ${data[i].cast}</dt><dd></dd>
          <dt><b>Director:</b> ${data[i].director}</dt><dd></dd>
          <dt><b>Duration:</b> ${data[i].duration}</dt><dd></dd>
        </dl>
        </div>`;
        }
        else {
          document.getElementById("up").innerHTML += `
          <div class="movie">
          <p class="movie-name"><b>Name:</b> ${data[i].name}</p>
          <img src="../Images/${data[i].thumbnail}" class="thumb" alt=" ${data[i].name}" title="${data[i].name}" onclick="switchVid(${data[i].id})"/>
          <dl>
            <dt><b>Cast:</b> ${data[i].cast}</dt><dd></dd>
            <dt><b>Director:</b> ${data[i].director}</dt><dd></dd>
            <dt><b>Duration:</b> ${data[i].duration}</dt><dd></dd>
          </dl>
          </div>`;
        }
        i++;
      } 
    </script>
    <script>
      var trailer = document.getElementById("trailer");
      var vid_index = 0;
      window.onload=init();
      function init(){
      for(var i=0;i<data.length;i++){
        var sr = data[i].src;
        var vid = document.createElement("video");
        vid.controls="controls";
        vid.autoplay="autoplay";
        vid.muted="muted";
        vid.innerHTML=`
        <source src="${data[i].src}" type="video/mp4">
        `
        trailer.appendChild(vid);  
      }
    }
    function switchVid(id) {
      vid_index = id-1;
      return slideshow();
    }
    slideshow();

    function slideshow(){
      var slides=document.querySelectorAll("video");
      for(var i =0; i< slides.length; i++){
        slides[i].style.display="none";
      }
      vid_index++;
      if (vid_index >slides.length)
        vid_index =1;
      slides[vid_index-1].style.display="block";
      slides[vid_index-1].load();
      slides[vid_index-1].onended=function(){
        setTimeout(slideshow,2000);
      }  
    }

    </script>
    </main>
    <footer>
      @Copyright of resources belongs to the corresponding copyright owners.
      <br />
      Fair use for education purpose| <span><a href="Index.html">Home</a></span>
      <a href="Design.html">Design</a>
    </footer>
  </body>
</html>